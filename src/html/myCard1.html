
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="apple-touch-fullscreen" content="YES">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="pragram" content="no-cache">
    <meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi">

    <link rel="stylesheet" href="../css/common.css">
    <style>

        .box-shadow_10 {
            -webkit-box-shadow: 0 0 10px #bbb;
            -moz-box-shadow: 0 0 10px #bbb;
            box-shadow: 0 0 10px #bbb;

        }
        .gc_list {
            margin-top: 40px;
            margin-left: 40px;
            margin-right: 40px;
            border-radius: 10px;
            background: #ffffff;
        }
        a:hover {
            text-decoration: underline;
        }
        .no_card {
            color: rgb(192, 192, 192);
            font-size: 44px;
        }
        .no_card_img {
            width: 200px;
            height: 200px;
            margin-top: 210px;
        }
        .banner {
            width: 100%;
            height: 90px;
            background-color: #ffffff;
            border-bottom: 1px solid #f0f0f0;
        }
        .menu-k, .menu-l {
            width: 49%;
            float: left;
            text-align: center;
            font-size: 28px;
            line-height: 90px;
        }
        .line {
            float: left;
            margin-top: 13px;
        }

        .bot-red {
            border-bottom: 1px solid #f08300;
            color: #f08300;
        }

        .img1 {
            width: 35%;
            float: left;
            height: 90%;
        }

        .img1 img {
            display: block;
            margin: 25px;
        }

        .txt-cont {
            padding: 10px;
            float: left;
        }

        .t1 {
            font-size: 28px;
            padding-top: 50px;
            padding-left: 30px
        }

        .t1-1 {
            padding-left: 10px;
            color: #f08300;
        }
        .t1-1 img{
            width: 40px;
            position: absolute;
            padding-top: 40px;
            padding-left: 60px;
        }
        .t2 {
            font-size: 20px;
            padding-top: 28px;
            padding-left: 20px;
        }
        .t3 {
            font-size: 26px;
            padding-top: 30px;
            padding-left: 20px;
        }
        .t31 {
            font-size: 26px;
            padding-top: 50px;
            padding-left: 20px;
        }
        .t4 {
            font-size: 20px;
            padding-top: 18px;
            padding-left: 20px;
        }
        .t5 {
            font-size: 20px;
            padding-top: 18px;
            padding-left: 20px;
        }
        .t6{
            width: 40px;
            position: absolute;
            right: 55px;
            margin-top: 30px;
        }
        /*#007aff*/
        .color-blu{
            color: #f08300;
        }
        .txt-foot{
            border-top: 1px solid #d4d4d4;
            clear: both;
            height: 40px;
            line-height: 40px;
            padding-left: 25px;
            font-size: 18px;
            color: #c0c0c0;
        }
        .pop-up{
            width: 60%;
            background-color: #ffffff;
            position: fixed;
            bottom: 330px;
            left: 50%;
            margin-left:-30%;
            z-index: 99999;
        }
        .pop-con{
            font-size: 20px;
            padding-left: 20px;
            padding-bottom: 20px;
        }
        .pop-smt{
            border-top: 1px solid #d4d4d4;
            font-size: 24px;
            text-align: center;
            padding-top: 20px;
        }
        .card_text {
            font-size: 24px;
            color: rgb(233, 72, 28);
            font-weight: 600;
            float: right;
            margin-top: 30px;
            margin-right: 70px;
        }
        .img_logo {
            margin-left: 10px;
            margin-top: 10px;
        }
        .card_number_password {
            font-size: 14px;
            margin-left: 10px;
        }

        .card_number {
            margin-left: 20px;
            margin-right: 20px;
            margin-bottom: 20px;
            margin-top: 10px
        }

        .card_number_text {
            padding: 5px;
            display: inline;
            color: white;
            background-color: gainsboro;
        }
        .card_money {
            position: absolute;
            margin-top: -100px;
            right: 85px;
            color: rgb(233, 72, 28);
            font-weight: 600;
            font-size: 44px;
        }

        .data {
            margin-left: 30px;
            margin-top: -5px;
            font-size: 12px
        }
        .info_left_a {
            font-size: 14px;
            color: rgb(61, 166, 255);
            text-decoration: underline;
            position: absolute;
            margin-top: -40px;
            right: 110px;
        }
        /*a{text-decoration: none;}*/
        a:hover {
            text-decoration: underline;
        }
        ul{list-style: none;}
        @media (device-width: 320px ) and (device-height: 568px) and (-webkit-min-device-pixel-ratio: 2 ) {
            /* 兼容iphone5 */
            .banner{
                border-bottom: 0.5px solid #d4d4d4;
            }
            .bot-red{border-bottom: 0.5px solid #f08300;}
            .txt-foot{border-top: 0.5px solid #d4d4d4;}
        }

        @media (device-width: 375px ) and (device-height: 667px) and (-webkit-min-device-pixel-ratio: 2 ) {
            /* 兼容iphone6 */
            .banner {
                border-bottom: 0.5px solid #d4d4d4;
            }
            .bot-red{border-bottom: 0.5px solid #f08300;}
            .txt-foot{border-top: 0.5px solid #d4d4d4;}
        }

        @media (device-width: 414px ) and (device-height: 736px) and (-webkit-min-device-pixel-ratio: 2 ) {
            /* 兼容iphone6 Plus */
            .banner {
                border-bottom: 0.5px solid #d4d4d4;
            }
            .bot-red{border-bottom: 0.5px solid #f08300;}
            .txt-foot{border-top: 0.5px solid #d4d4d4;}
        }
    </style>

    <title>我的礼品</title>
</head>
<body>

<div id="list1">
   <div id='no_card_div' style='position: absolute; width: 100%; margin-top:20px; text-align:center;background:#fff'>
                    <img style=' left: 50%' class='no_card_img' src='../images/personal_no_card.png'>
                    <div style='height: 20px'></div>
                    <p class='no_card'>暂无礼品</p>
                   </div>
</div>



<div id="load_more" style="text-align: center;font-size:20px;display: none;height: 80px"
     onclick="load_more()"><p style="padding-top: 30px">点击加载更多</p>
</div>
</body>
<script src="../js/common.js"></script>
<script src="../js/jquery-1.9.1.min.js"></script>
<script src="../js/spinner.js"></script>
<script type="text/javascript">

    var openId = window.localStorage.getItem(config.openIdName);
    var page = 1;
    var pageSize = 1000;
    var haveMore = false;

    GetAsyncData("Reward/1010", function (backdata) {
        console.log(JSON.stringify(backdata));
        var data = backdata.data;
        var count = 0;
        if (data != null) {
        	for (var j = 0; j < data.length; j++) {
                count += data[j].number;
            }
        }
        if (count == null || count == 0 || typeof (count) == "undefined" || count == "") {
            
        } else {
        	$("#no_card_div").remove();
            for (var i in data) {
                if (data[i].type == "4" && data[i].number != "0") {
                    $("#list1").append('<div class="gc_list box-shadow_10">' +
                            '<div class="img1"><img src="../images/cars/ysy.png" width="90%" height="90%"></div>' +
                            '<div class="txt-cont">' +
                            '<div class="t31">汽车主动安全系统<span class="t1-1">×' + data[i].number + '</span></div>' +
                            '<div class="t2">我们会尽快联系您并安装</div>' +
                            '</div>' +
                            '<div class="txt-foot">'+
                            '<span>'+ data[i].wayOfReward + '</span>'+
                            '<span style="position: absolute;right: 70px;">'+ data[i].time_got +'</span>'+
                            '</div>'+
                            '</div>');
                } else if (data[i].type == "5" && data[i].number != "0") {
                    $("#list1").append('<div class="gc_list box-shadow_10">' +
                            '<div class="img1"><img src="../images/cars/sss.png" width="90%" height="90%"></div>' +
                            '<div class="txt-cont">' +
                            '<div class="t3">全球紧急医疗服务<span class="t1-1" onclick="sss()"><img src="../images/personal_ic_right.png" width="100%"></span></div>' +
                            '<div class="t4">救援电话:<a href="tel:86 10 5166 7910"><span class="color-blu">86 10 5166 7910</span></a></div>' +
                            '<div class="t5">有效期1年</div>'+
                            '</div>' +
                            '<div class="txt-foot">'+
                            '<span>'+ data[i].wayOfReward + '</span>'+
                            '<span style="position: absolute;right: 70px;">'+ data[i].time_got +'</span>'+
                            '</div>'+
                            '</div>');
                }
            }
        }

    }, {"openId": openId, "page": page, "pageSize": pageSize});

    GetAsyncData("User/1004", function (backdata) {

        var json = backdata;
        var count = (json == null || json.data== null) ? 0 : json.data.length;
        if (count == null || count == 0 || typeof (count) == "undefined" || count == "") {
           
        }
        else {
        	$("#no_card_div").remove();
            if (count == pageSize) {
                haveMore = true;
                $("#load_more").css("display", "block");
            } else {
                haveMore = false;
                $("#load_more").css("display", "none");
            }
            for (var i = 0; i < count; i++) {
                var item = json.data[i];
                var url = item.rewardUrl;
                var money = item.rewardName.substr(0, 3);
                var type = item.rewardName.substr(4, item.rewardName.length - 4);
                var number = item.rewardContent;
                var password = "00000000000000000000";
                if (item.hasOwnProperty('passWord')) {
                    password = item.passWord;
                }
                var dateStr = item.endTime;
                var htmlStr = "<li class='gc_list box-shadow_10'><div><img class='img_logo' src='../images/gc_logo.jpg'>" +
                        "<span class='card_text'>" + type + "</span><div class='money_count'></div></div>" +
                        "<div style='padding-bottom: 15px;'><div class='card_number_password'><div class='card_number '><span>卡号：</span><span class='card_number_text'>" + number + "&nbsp;&nbsp;</span></div>" +
                        "<div style='margin: 20px'><span>密码：</span><span class='card_number_text'>" + password + "</span></div></div>" +
                        "<div><div class='card_money'>" + money + "<span style='font-size: 18px'>元</span></div><a href='http://m.sinopecsales.com/webmobile/html/webhome.jsp' class='info_left_a'>点击充值</a></div>"
                        + " <p class='data'>有效日期：" + dateStr + "</p></div></li>";
                $("#list1").append(htmlStr);
            }
        }
    }, {"openId": openId, "page": page, "pageSize": pageSize});
    
    
    baiduCollection();

    function sss(){
        window.location.href = "../activity_cars/sss.html";
    }

    function load_more() {
        if (haveMore) {
            $("#load_more").css("display", "none");
            showBottomSpinner();
            GetAsyncData("User/1004", function (backdata) {
                hideBottomSpinner();
                var json = backdata;
                var count = json.data.length;
                if (count == pageSize) {
                    haveMore = true;
                    $("#load_more").css("display", "block");
                } else {
                    haveMore = false;
                    $("#load_more").css("display", "none");
                }
                if (count != 0) {
                    page = page + 1;
                }
                for (var i = 0; i < count; i++) {
                    var item = json.data[i];
                    var url = item.rewardUrl;
                    var money = item.rewardName.substr(0, 3);
                    var type = item.rewardName.substr(4, item.rewardName.length - 4);
                    var number = item.rewardContent;
                    var password = "00000000000000000000";
                    if (item.hasOwnProperty('passWord')) {
                        password = item.passWord;
                    }
                    var dateStr = item.endTime;
                    var htmlStr = "<li class='gc_list box-shadow_10'><div><img class='img_logo' src='../images/gc_logo.jpg'>" +
                            "<span class='card_text'>" + type + "</span><div class='money_count'></div></div>" +
                            "<div><div class='card_number_password'><div class='card_number '><span>卡号：</span><span class='card_number_text'>" + number + "&nbsp;&nbsp;</span></div>" +
                            "<div style='margin: 20px'><span>密码：</span><span class='card_number_text'>" + password + "</span></div></div>" +
                            "<div><div class='card_money'>" + money + "<span style='font-size: 18px'>元</span></div><a href='http://m.sinopecsales.com/webmobile/html/webhome.jsp' class='info_left_a'>点击充值</a></div>"
                            + " <p class='data'>有效日期：" + dateStr + "</p></div></li>";
                    $("ul").append(htmlStr);
                }
            }, {"openId": openId, "page": page + 1, "pageSize": pageSize});
        }
    }

    $(".bt").click(function () {
        $(this).addClass("bot-red").siblings().removeClass('bot-red');
        if ($(this).hasClass("menu-l")) {
            $("#card").css("display", "block");
            $("#list1").css("display", "none");
        } else {
            $("#card").css("display", "none");
            $("#list1").css("display", "block");
        }
    });

</script>

</html>